<p style="color: green"><%= notice %></p>

<h1>Comments</h1>

<div id="comments">
  <% if @comments.any? %>
    <%= render @comments %> <!-- Render all comments if they exist -->

    <h2>All Comments</h2>
    <% @comments.each do |comment| %>
      <div>
        <p><strong><%= comment.user.email %>:</strong> <%= comment.body %></p>

        <% if comment.user == current_user %>
          <%= link_to 'Edit', edit_comment_path(comment) %>
          <%= link_to 'Delete', comment, method: :delete, data: { confirm: 'Are you sure you want to delete this comment?' }, class: 'btn btn-danger' %>
        <% end %>
      </div>
    <% end %>
  <% else %>
    <p>No comments available.</p>
  <% end %>
</div>

<%= form_with(model: [@post, Comment.new]) do |form| %>
  <div>
    <%= form.label :body, "Add a Comment" %>
    <%= form.text_area :body %>
  </div>
  <div>
    <%= form.submit "Submit Comment" %>
  </div>
<% end %>
<%= link_to "New Comment", comments_path(@post) %>
<%= link_to "Back to Posts", posts_path, class: 'btn btn-secondary' %>


